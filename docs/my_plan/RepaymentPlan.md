---
title: 还款计划思考
tags:
  - repayment
  - 还款
---

### 参考

[常见的还款方式及其优缺点-参考](https://www.sohu.com/a/309095754_120114588)

[招行计算器](http://www.cmbchina.com/CmbWebPubInfo/Cal_Loan_Per.aspx)

[等额本息百度百科-参考](https://baike.baidu.com/item/%E7%AD%89%E9%A2%9D%E6%9C%AC%E6%81%AF)

[等额本息法百度百科-参考](https://baike.baidu.com/item/%E7%AD%89%E9%A2%9D%E6%9C%AC%E6%81%AF%E6%B3%95/11049926?fr=aladdin)

### 疑问
 - 当后期发现，最开始执行的还款计划有问题时。应该如何修正这个错误？
### 还款类型

-   等额本息（日对日）

-   等额本息（固定还款日）

-   先息后本（日对日）

-   先息后本（固定还款日）

-   气球贷（日对日）

-   气球贷（固定还款日）

### 还款日期类型

-   日对日(以月为最小单位计算利息)

-   固定日期还款(以天为最小单位计算利息)

### 等额本息（日对日）

-   每月还款金额计算

>    贷款本金×期利率×(1+月利率)^贷款期数/ [ (1+月利率)^贷款期数-1]

-   每月利息计算
>   剩余本金 * 月利率

-   每月还款本金计算
> 还款金额 - 月利率

### 等额本息（固定还款日）

>**特点：第一期相较于**`第二期至最后一期`**的还款金额会有差异，理论上**`第二期至最后一期`**每期的还款金额应该是一样的。**
所以应该是分成2个阶段进行计算

#### 第一个阶段：

>   **每日利息：** 月利息/30

>   **开始日期：**

>   **第一期还款日：** 距离开始日期肯定是要大于30天的。

-   第一期合计利息： (开始日期 - 第一期还款日) * 每日利息

-   第一期还款本金： [使用ppmt进行计算](http://www.rjzxw.com/ref/execlref-caiwu-ppmt.html)

-   第一期还款合计： 利息 + 本金

#### 第二个阶段：

**特点：从第二期开始至最后一期，每期还款金额是一样的。**

>   月利率：剩余本金 * 月利率

>   还款金额：
 贷款本金×期利率×(1+月利率)^贷款期数/ [ (1+月利率)^贷款期数-1]

>    本金： 还款金额- 月利率

### 先息后本（日对日）

-   概述

>   先息后本，是指还款时，每期先偿还贷款利息，在贷款到期后再偿还所有本金。

-   如何计算

>   应该分2个阶段进行计算：`只还利息阶段`和`最后一期`。

-   只还利息阶段 
>还款金额= 借款总金额 * 月利息

-   最后一期 
>还款金额= 借款总金额 * 月利息 + 借款总金额

### 先息后本（固定还款日）

-   概述

>   特点：`第一期还款日`和`开始日期`的间隔需大于30天。

-   第一期计算方式

>   还款金额= （月利息 / 30）  * （开始日期 - 第一期还款日）

-   第二期至倒数第二期

>   还款金额= 借款总金额  * 月利息

-   最后一期

>   还款金额= 借款总金额  * 月利息 + 借款总金额

### 气球贷（日对日）

>   以96期等额本息，计算每月还款方式。客户实际还款期数为60期，前59期正常还款，最后一期归还所有（正常还款的利息+剩余本金）。

-   前59期

>   每期还款金额= 贷款本金×期利率×(1+月利率)^贷款期数/ [ (1+月利率)^贷款期数-1]

>   月利息：剩余本金 *  月利率

>   每月还款本金：还款金额- 月利息

-   最后一期
>   还款金额 = 利息（按照96期计算的利息）+ 剩余本金


### 气球贷（固定还款日）
- 日利率
>年化利率/360

**第一期还款日：** 距离开始日期肯定要大于30天的。

-   第一期

>当期利息 = 日利率 * （开始日期 - 第一次还款日）+ 借款总金额 

>当期本金 = [使用ppmt进行计算](http://www.rjzxw.com/ref/execlref-caiwu-ppmt.html)

> 当期还款合计 =  当期利息+ 当期本金

-   第二期至倒数第二期

> 当期还款合计 =  贷款本金×期利率×(1+月利率)^贷款期数/ [ (1+月利率)^贷款期数-1]

> 当期利息 = 贷款本金 * 月利率

> 当期本金 = 还款合计 - 当期利息

- 最后一期
> 当期间隔时间：倒数第二期还款日 - 固定还款日

> 还款金额 = 剩余本金+（剩余本金 * 日利率 * 当期间隔时间）

### 划扣类型
- 兴业银行
>单日划扣无金额上限
- 快付通
>单日划扣有金额上限

###  提前结清
#### 少于12期
- 描述:剩余本金 + 补够12期利息 + 罚息
>已还本金： 根据客户的实际还款记录，计算实际已还本金。

>剩余本金： 借款总金额 - 已还本金

>需要补的利息合计：(12-已还期数)* 剩余本金 * 月利率


>罚息：
根据实际还款记录得出罚息天数 * 0.000657 * 剩余本金
 

#### 大于等于12期
>剩余本金+当期利息+0.03*剩余本金+罚息

>已还本金： 根据客户的实际还款记录，计算实际已还本金。

>剩余本金： 借款总金额 - 已还本金

>当期利息：剩余本金 * 月利率

>罚息：
根据实际还款记录得出罚息天数 * 0.000657 * 剩余本金


### 划扣优先级
 >本金>>利息>>罚息   （还款日之前，也要支持划扣）
1. 客户只要足额还了`本金`和`利息`，那么视客户`正常还款`。
2. 反之视为`逾期`
3. `罚息`是在，客户结清贷款时再进行计算和处理。（按天计算，万分之6.57一天）



------
2021-01-14 下午
* * *



### 认领
#### 概述
>借款人线下打款至信托专户，我们通过资方给到的接口去查询借款人的交易明细。将交易明细和还款计划对上号。
#### 注意
>组合认领上期剩余的+当期的流水

>根据接口返回的`业务日期`(资方到账日期)，判断客户是否逾期

### 近期需要还款客户统计
> 根据条件：开始日期（默认为当天）、结束日期

> 统计概述：指定时间段内需要还款的客户明细（以还款日期做升序排序）。

> 要显示的列： 名字、电话、还款日期、本金、利息、合计 、罚息、状态（未还款，已还款，垫付）、是否存在垫付记录

### 垫付
#### 垫付后客户还款说明：
>目前发生垫付后，如果客户还款。不能使用 **划扣**，因为**划扣**无法像**认领**一样去修正明细。

#### 如何收回垫付的钱？
- **客户还款后**

><font color='red'>如果结算日之前</font>

> 首先：撤回之前的明细，生成新明细，推送资方

> 然后：财务发起`线下退款`拿回之前垫付的钱

> 同时：修正还款计划（在修正还款计划时，我们之前垫付的那几期需要，体现为客户正常还款。也就是只有：本金+利息）

><font color='red'>结算日之后</font>

> 首先：无法`撤回`之前的明细

> 然后：修正还款计划（在修正还款计划时，我们之前垫付的那几期需要，体现为客户正常还款。也就是只有：本金+利息）只能在，客户之后的还款计划的`罚息`栏目中增加金额（`违约金`和`垫付费用`）。

> 最后：在客户结清贷款是，以`违约金`、`罚息`方式要回之前垫付的费用

- **客户不还钱呢？**

>怎么处理？

#### 思考
>应该单独有一张表，来记录垫付记录。

### 前端思考

#### 从减少服务器压力的角度

-   前言

>   还款计划在前端生成，仅从后端获取`有还款记录的订单`的`还款记录`，进行组装呈现。
>   [Javascript的io操作](https://www.cnblogs.com/mafeng/p/5225391.html)

-   还款计划类型

>   还没有还款记录的订单、有还款记录的订单。

**还没有还款记录的订单**：这个运算应该放在前端进行计算，并呈现。这样可以有效减少`服务器`和`带宽`的压力。但是这样做对客户端硬件要求应该会挺高的，以当前公司电脑的情况来说，我觉得有点悬。
**有还款记录的订单**：前端发起post请求，只携带`订单标识`，后端仅返回此订单的`还款记录`。前端对数据进行处理组装呈现。

展示效果：（贷款本金为1000，月利率为0.01，还款期数12）
|还款日期| 月还款|月本金|月利息|剩余本金| 
|--|--|--|--|--| 
| 2020年01月21日|87.92|79.59|8.33|920.42| 
| 2020年02月21日|87.92 |80.25|7.67|840.17|


<!-- 评论 -->
<Vssue />
